## 47.-Ispolizuite-tipobezopasnie-resheniya-vmesto-dinamicheskoi-modifikatsii

–û—Ç–ª–∏—á–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ü–∏–∫–ª–∞!
–ü—Ä–∞–≤–∏–ª–æ ¬´–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏¬ª –∫–∞—Å–∞–µ—Ç—Å—è —Ç–æ–≥–æ,
—á—Ç–æ –≤ JavaScript –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –æ—á–µ–Ω—å –º–Ω–æ–≥–æ–µ ¬´–Ω–∞ –ª–µ—Ç—É¬ª ‚Äî –¥–æ–±–∞–≤–ª—è—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞, –∏–∑–º–µ–Ω—è—Ç—å –ø—Ä–æ—Ç–æ—Ç–∏–ø—ã,
–≤—Å—Ç–∞–≤–ª—è—Ç—å –º–µ—Ç–æ–¥—ã –∏ —Ç.–¥. –ù–æ –≤ TypeScript —ç—Ç–æ –ª–æ–º–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É —Ç–∏–ø–æ–≤.
–õ—É—á—à–µ —Å—Ç—Ä–æ–∏—Ç—å —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏, –∞ –Ω–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑–º–µ–Ω—è—Ç—å –æ–±—ä–µ–∫—Ç—ã.

–í–æ—Ç –Ω–∞–≥–ª—è–¥–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã üëá

### üîπ 1) ‚ùå –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞

```ts
const user = { id: 1, name: "Serii" };
(user as any).email = "serii@example.com"; // üí• –æ–±—Ö–æ–¥–∏–º —Å–∏—Å—Ç–µ–º—É —Ç–∏–ø–æ–≤
```


‚úÖ –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ:

```ts
interface User {
id: number;
name: string;
      email?: string;
}

const user: User = { id: 1, name: "Serii" };
user.email = "serii@example.com"; // ‚úÖ –≤—Å—ë –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
```


‚û°Ô∏è –õ—É—á—à–µ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è.

### üîπ 2) ‚ùå –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ –≤ –æ–±—ä–µ–∫—Ç

```ts
const car = { brand: "Tesla" };
(car as any).start = () => console.log("Go!"); // üí• –Ω–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–∏, —á—Ç–æ –º–µ—Ç–æ–¥ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
car.start();
```


‚úÖ –•–æ—Ä–æ—à–æ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∞–±—Ä–∏–∫—É –∏–ª–∏ –∫–ª–∞—Å—Å

```ts
interface Car {
brand: string;
       start(): void;
}

function createCar(brand: string): Car {
    return {
        brand,
            start() {
                console.log(`${brand} started`);
            }
    };
}

const car = createCar("Tesla");
car.start(); // ‚úÖ –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–æ
```

### üîπ 3) ‚ùå –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞

```ts
(Array.prototype as any).first = function() {
    return this[0];
};

const arr = [1, 2, 3];
console.log((arr as any).first()); // üí• IDE –∏ TS –Ω–µ –∑–Ω–∞—é—Ç –ø—Ä–æ `first`
```


‚úÖ –•–æ—Ä–æ—à–æ: —Å–æ–∑–¥–∞—Ç—å —É—Ç–∏–ª–∏—Ç—É

```ts
function first<T>(arr: T[]): T | undefined {
    return arr[0];
}

console.log(first([1, 2, 3])); // ‚úÖ —Ç–∏–ø: number | undefined
```


‚û°Ô∏è –ù–µ –ª–æ–º–∞–µ–º Array, –∞ –¥–µ–ª–∞–µ–º —á–∏—Å—Ç—É—é —Ñ—É–Ω–∫—Ü–∏—é —Å —Ç–∏–ø–∞–º–∏.

### üîπ 4) ‚ùå –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞ ¬´–Ω–∞ –ª–µ—Ç—É¬ª

```ts
class Animal {
    constructor(public name: string) {}
}
(Animal.prototype as any).speak = function() {
    console.log(this.name + " speaks");
};

const a = new Animal("Dog");
(a as any).speak(); // üí• TS –Ω–µ –∑–Ω–∞–µ—Ç –ø—Ä–æ speak
```


‚úÖ –•–æ—Ä–æ—à–æ: –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ

```ts
class Animal {
    constructor(public name: string) {}
    speak() {
        console.log(`${this.name} speaks`);
    }
}

const a = new Animal("Dog");
a.speak(); // ‚úÖ
```

### üîπ 5) ‚ùå –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ñ–ª–∞–≥–æ–≤

```ts
const config: any = {};
config.enabled = true; // üí• –Ω–∏–∫—Ç–æ –Ω–µ –∑–Ω–∞–µ—Ç, —á—Ç–æ —Ç–∞–º –µ—â—ë –ø–æ—è–≤–∏—Ç—Å—è
```


‚úÖ –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ:

```ts
interface Config {
enabled: boolean;
         retries?: number;
}

const config: Config = { enabled: true };
```

### üîπ 6) ‚ùå –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–ª–∏—è–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–æ–ª—è–º–∏

```ts
function extend(a: any, b: any) {
    for (const k in b) a[k] = b[k];
    return a;
}

const obj = extend({ name: "Serii" }, { age: 30 });
console.log(obj.name, obj.age);
```


‚úÖ –•–æ—Ä–æ—à–æ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å generics

```ts
function merge<A, B>(a: A, b: B): A & B {
    return { ...a, ...b };
}

const obj = merge({ name: "Serii" }, { age: 30 });
// ‚úÖ obj: { name: string; age: number }
```


‚û°Ô∏è –¢–µ–ø–µ—Ä—å –≤—Å—ë —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ, –±–µ–∑ any.

### üîπ 7) ‚ùå –ü—Ä–∏—Å–≤–æ–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ –∫–ª—é—á–∞–º–∏

```ts
const user: any = {};
user["first-name"] = "John";
user["last-name"] = "Doe";
```


‚úÖ –•–æ—Ä–æ—à–æ:

```ts
type User = Record<"firstName" | "lastName", string>;

const user: User = {
firstName: "John",
           lastName: "Doe"
};
```


‚û°Ô∏è Record —Å–æ–∑–¥–∞—ë—Ç —Å—Ç—Ä–æ–≥–∏–µ –∫–ª—é—á–∏ —Å —Ç–∏–ø–∞–º–∏.

### üîπ 8) ‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Object.assign –±–µ–∑ —Ç–∏–ø–æ–≤

```ts
const settings = Object.assign({}, { theme: "dark" }, { debug: true });
// settings: any
```


‚úÖ –•–æ—Ä–æ—à–æ:

```ts
const settings = Object.assign({ theme: "light", debug: false }, { debug: true });
// ‚úÖ settings: { theme: string; debug: boolean }
```


–∏–ª–∏

```ts
function assign<T, U>(a: T, b: U): T & U {
    return Object.assign({}, a, b);
}
```

### üîπ 9) ‚ùå –ú—É—Ç–∞—Ü–∏—è —Ç–∏–ø–æ–≤ —á–µ—Ä–µ–∑ –∏–Ω–¥–µ–∫—Å

```ts
const product: any = {};
product["price"] = "free"; // üí• price –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å number
```


‚úÖ –•–æ—Ä–æ—à–æ:

```ts
interface Product {
name: string;
price: number;
}

const product: Product = { name: "Book", price: 10 };
```

### üîπ 10) ‚ùå –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ (anti-pattern)

```ts
(window as any).user = { id: 1, name: "Serii" };
```


‚úÖ –•–æ—Ä–æ—à–æ:

```ts
declare global {
    interface Window {
user: { id: number; name: string };
    }
}

window.user = { id: 1, name: "Serii" }; // ‚úÖ —Ç–µ–ø–µ—Ä—å TS –∑–Ω–∞–µ—Ç –æ–± —ç—Ç–æ–º —Å–≤–æ–π—Å—Ç–≤–µ
```


‚û°Ô∏è –ï—Å–ª–∏ —É–∂ –Ω—É–∂–Ω–æ –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ ‚Äî —Ä–∞—Å—à–∏—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–µ—Ä–µ–∑ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏—é, –∞ –Ω–µ ¬´–Ω–∞ –ª–µ—Ç—É¬ª.

### üí° –ò—Ç–æ–≥

- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Ç–µ—Ö–Ω–∏–∫–∞	–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ –≤—Ä—É—á–Ω—É—é	–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ / –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ç–æ—Ç–∏–ø–æ–≤	–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤ –≤ —Ä–∞–Ω—Ç–∞–π–º–µ	–ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏–ª–∏ –∫–æ–º–ø–æ–∑–∏—Ü–∏—è
- any –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∫–ª—é—á–∏	Record<K,V> –∏–ª–∏ generics
- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ	–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ —á–µ—Ä–µ–∑ declare global

### ‚öôÔ∏è –ì–ª–∞–≤–Ω–∞—è –º—ã—Å–ª—å:

TypeScript —Å–æ–∑–¥–∞–Ω, —á—Ç–æ–±—ã –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –¥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.
–õ—é–±–∞—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –ª–æ–º–∞–µ—Ç —ç—Ç–æ —Å–≤–æ–π—Å—Ç–≤–æ.
–ü–æ—ç—Ç–æ–º—É –ª—É—á—à–µ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Ñ–∞–±—Ä–∏–∫–∏, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ —É—Ç–∏–ª–∏—Ç—ã,
—á–µ–º –º–µ–Ω—è—Ç—å –æ–±—ä–µ–∫—Ç—ã –∏ –∫–ª–∞—Å—Å—ã ¬´–Ω–∞ –ª–µ—Ç—É¬ª.
